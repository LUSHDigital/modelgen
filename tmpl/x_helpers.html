{{define "helpers"}}
package {{ .PackageName }}

/*---------------------------+
| Code generated by modelgen |
|        DO NOT EDIT.        |
+---------------------------*/

import (
"database/sql"
"database/sql/driver"
"encoding/json"
"reflect"
"time"

"github.com/go-sql-driver/mysql"
)

// StdTime provides default SQL TIME format
const StdTime = "15:04:05"

// emptyTime allows default times to be considered
// null for insertion into the database.
var emptyTime = time.Time{}

/*-------------+
| Type aliases |
+-------------*/

// NullFloat64 aliases sql.NullFloat64
type NullFloat64 sql.NullFloat64

// NullString aliases sql.NullString
type NullString sql.NullString

// NullBool aliases sql.NullBool
type NullBool sql.NullBool

// NullInt64 aliases sql.NullInt64
type NullInt64 sql.NullInt64

// NullTime aliases sql.NullTime
type NullTime mysql.NullTime

// RawJSON aliases json.RawMessage
type RawJSON json.RawMessage

/*--------------------------    -+
| NullString implementations |
+---------------------------*/

// UnmarshalJSON for NullString
func (n NullString) UnmarshalJSON(b []byte) error {
err := json.Unmarshal(b, &n.String)
n.Valid = err == nil
return err
}

// Value for NullString
func (n NullString) Value() (driver.Value, error) {
if !n.Valid {
return nil, nil
}
return n.String, nil
}

// Scan for NullString
func (n *NullString) Scan(src interface{}) error {
var a sql.NullString
if err := a.Scan(src); err != nil {
return err
}
n.String = a.String
if reflect.TypeOf(src) != nil {
n.Valid = true
}
return nil
}

// MarshalJSON for NullString
func (n *NullString) MarshalJSON() ([]byte, error) {
var a *string
if n.Valid {
a = &n.String
}
return json.Marshal(a)
}

/*----------------------------+
| NullFloat64 implementations |
+----------------------------*/

// UnmarshalJSON for NullFloat64
func (n *NullFloat64) UnmarshalJSON(b []byte) error {
err := json.Unmarshal(b, &n.Float64)
n.Valid = err == nil
return err
}

// MarshalJSON for NullFloat64
func (n *NullFloat64) MarshalJSON() ([]byte, error) {
var a *float64
if n.Valid {
a = &n.Float64
}
return json.Marshal(a)
}

// Scan for NullFloat64
func (n *NullFloat64) Scan(src interface{}) error {
var a sql.NullFloat64
if err := a.Scan(src); err != nil {
return err
}
n.Float64 = a.Float64
if reflect.TypeOf(src) != nil {
n.Valid = true
}
return nil
}

// Value for NullFloat64
func (n NullFloat64) Value() (driver.Value, error) {
if !n.Valid {
return nil, nil
}
return n.Float64, nil
}

/*--------------------------+
| NullInt64 implementations |
+--------------------------*/

// UnmarshalJSON for NullInt64
func (n NullInt64) UnmarshalJSON(b []byte) error {
err := json.Unmarshal(b, &n.Int64)
n.Valid = err == nil
return err
}

// Value for NullInt64
func (n NullInt64) Value() (driver.Value, error) {
if !n.Valid {
return nil, nil
}
return n.Int64, nil
}

// Scan for NullInt64
func (n *NullInt64) Scan(src interface{}) error {
var a sql.NullInt64
if err := a.Scan(src); err != nil {
return err
}
n.Int64 = a.Int64
if reflect.TypeOf(src) != nil {
n.Valid = true
}
return nil
}

// MarshalJSON for NullInt64
func (n *NullInt64) MarshalJSON() ([]byte, error) {
var a *int64
if n.Valid {
a = &n.Int64
}
return json.Marshal(a)
}

/*-------------------------+
| NullBool implementations |
+-------------------------*/

// UnmarshalJSON for NullBool
func (n *NullBool) UnmarshalJSON(b []byte) error {
err := json.Unmarshal(b, &n.Bool)
n.Valid = err == nil
return err
}

// Value for NullBool
func (n NullBool) Value() (driver.Value, error) {
if !n.Valid {
return nil, nil
}
return n.Bool, nil
}

// Scan for NullBool
func (n *NullBool) Scan(src interface{}) error {
var a sql.NullBool
if err := a.Scan(src); err != nil {
return err
}
n.Bool = a.Bool
if reflect.TypeOf(src) != nil {
n.Valid = true
}
return nil
}

// MarshalJSON for NullBool
func (n *NullBool) MarshalJSON() ([]byte, error) {
var a *bool
if n.Valid {
a = &n.Bool
}
return json.Marshal(a)
}

/*-------------------------+
| NullTime implementations |
+-------------------------*/

// UnmarshalJSON for NullTime
func (n NullTime) UnmarshalJSON(b []byte) error {
s := string(b)
tim, err := time.Parse(time.RFC3339, s)
if err != nil {
n.Valid = false
return err
}

n.Time = tim
n.Valid = true
return nil
}

// Value for NullTime
func (n NullTime) Value() (driver.Value, error) {
if !n.Valid {
return nil, nil
}
return n.Time, nil
}

// Scan for NullTime
func (n *NullTime) Scan(src interface{}) error {
var a mysql.NullTime
if err := a.Scan(src); err != nil {
return err
}
n.Time = a.Time
if reflect.TypeOf(src) != nil {
n.Valid = true
}
return nil
}

// MarshalJSON for NullTime
func (n *NullTime) MarshalJSON() ([]byte, error) {
var a *time.Time
if n.Valid {
a = &n.Time
}
return json.Marshal(a)
}

/*------------------------+
| RawJSON implementations |
+------------------------*/

// UnmarshalJSON for NullString
func (n *RawJSON) UnmarshalJSON(b []byte) error {
var a json.RawMessage
json.Unmarshal(b, &a)
c := RawJSON(a)
*n = c
return nil
}

// Value for NullString
func (n RawJSON) Value() (driver.Value, error) {
return string(n), nil
}

// Scan for NullString
func (n *RawJSON) Scan(src interface{}) error {
var a sql.NullString
if err := a.Scan(src); err != nil {
return err
}
jsn := RawJSON([]byte(a.String))
*n = jsn
return nil
}

// MarshalJSON for NullString
func (n *RawJSON) MarshalJSON() ([]byte, error) {
a := json.RawMessage(*n)
return a.MarshalJSON()
}

/*-----------------+
| Helper functions |
+-----------------*/

// ToNullString returns a new NullString
func ToNullString(s *string) NullString {
if s == nil {
return NullString(sql.NullString{Valid: false})
}
return NullString(sql.NullString{String: *s, Valid: true})
}

// ToNullInt64 returns a new NullInt64
func ToNullInt64(i *int64) NullInt64 {
if i == nil {
return NullInt64(sql.NullInt64{Valid: false})
}
return NullInt64(sql.NullInt64{Int64: *i, Valid: true})
}

// ToNullFloat64 returns a new NullFloat64
func ToNullFloat64(i *float64) NullFloat64 {
if i == nil {
return NullFloat64(sql.NullFloat64{Valid: false})
}
return NullFloat64(sql.NullFloat64{Float64: *i, Valid: true})
}

// ToNullBool creates a new NullBool
func ToNullBool(b *bool) NullBool {
if b == nil {
return NullBool(sql.NullBool{Valid: false})
}
return NullBool(sql.NullBool{Bool: *b, Valid: true})
}

// ToNullTime creates a new NullTime
func ToNullTime(t time.Time) NullTime {
if t == emptyTime {
return NullTime(mysql.NullTime{Valid: false})
}
return NullTime(mysql.NullTime{Time: t, Valid: true})
}
{{end}}
